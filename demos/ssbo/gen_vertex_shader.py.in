# encoding=utf-8

"""Create vertex shader based on all the base type combination."""

from __future__ import print_function
import argparse
import os
import textwrap
import subprocess

from mako.template import Template

VERT_TEMPLATE = 'shader.vert.mako'
OUT_FILE = 'shader_'
COMMAND='@top_srcdir@/@GLSLANG@'

def main():
    types = [['1', 'float16_t'],
             ['2', 'f16vec2'],
             ['3', 'f16vec3'],
             ['4', 'f16vec4']]

    template_filepath = os.path.join(os.path.dirname(__file__), VERT_TEMPLATE)
    template = Template(filename=template_filepath,
                        strict_undefined=True)
    for t in types:
        glsl_filename = os.path.join(os.path.dirname(__file__), OUT_FILE+t[0]+'.vert')

        with open(glsl_filename, 'w') as glsl_file:
            glsl_file.write(template.render(type_name=t[1]))

        subprocess.call([COMMAND, '-V', glsl_filename, '-o', glsl_filename+'.spv'])

if __name__ == '__main__':
    main()
